name : lambda-deploy
on:
  workflow_dispatch:
jobs:
  lambda-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Configure AWS
        uses: aws-actions/configure-aws-credentials@v4.0.2
        with:
          role-to-assume: arn:aws:iam::949263681218:role/service-role/cicd-role-174ywra0
          aws-region: us-east-1
      - name: Creating zip
        run: |
          sudo apt install zip
          cd lambda
          zip -r lambda_zip.zip *
      - name: Deploying lambda
        run: |
          aws lambda update-function-code --function-name cicd --zip-file fileb://./deploy/lambda_zip.zip